// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id              String            @id @default(uuid())
  email           String            @unique
  password        String
  firstName       String
  lastName        String
  createdAt       DateTime          @default(now())
  updatedAt       DateTime          @updatedAt
  weeklyProgress  WeeklyProgress[]
  habitCheckIns   HabitCheckIn[]
  workoutSessions WorkoutSession[]
}

model WeeklyProgress {
  id         String   @id @default(uuid())
  userId     String
  user       User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  weekNumber Int
  startDate  DateTime
  endDate    DateTime
  frontPhoto String
  backPhoto  String
  sidePhoto  String
  notes      String?
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@unique([userId, weekNumber])
}

model HabitCheckIn {
  id      String   @id @default(uuid())
  userId  String
  user    User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  date    DateTime

  // Morning habits
  legsUpWall       Boolean @default(false)
  dryBrushing      Boolean @default(false)
  contrastShower   Boolean @default(false)
  morningHydration Boolean @default(false)

  // Throughout day
  hourlyMovement Boolean @default(false)
  stepsCount     Int?
  dailyHydration Float?

  // Evening habits
  gluteExercises Boolean @default(false)
  toePickups     Boolean @default(false)
  oilMassage     Boolean @default(false)
  magnesiumApp   Boolean @default(false)
  legsElevated   Boolean @default(false)

  // Nutrition
  collagenIntake Boolean @default(false)
  proteinMeals   Boolean @default(false)
  lowSugar       Boolean @default(false)
  avoidSeedOils  Boolean @default(false)

  notes     String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([userId, date])
}

model WorkoutSession {
  id             String            @id @default(uuid())
  userId         String
  user           User              @relation(fields: [userId], references: [id], onDelete: Cascade)
  date           DateTime
  weekNumber     Int
  workoutNumber  Int
  exercises      WorkoutExercise[]
  notes          String?
  duration       Int?
  completed      Boolean           @default(false)
  createdAt      DateTime          @default(now())
  updatedAt      DateTime          @updatedAt

  @@unique([userId, date])
}

model WorkoutExercise {
  id           String         @id @default(uuid())
  workoutId    String
  workout      WorkoutSession @relation(fields: [workoutId], references: [id], onDelete: Cascade)
  exerciseName String
  sets         Int
  reps         Int
  weight       Float?
  completed    Boolean        @default(false)
}
